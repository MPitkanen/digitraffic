<!--Assign empty arrays-->
{% assign all_years = '' | split: ',' %}
{% assign unique_years = '' | split: ',' %}

<!--Get all years for all posts in category-->
{% for category in site.categories %}
  {% if category[0] == include.category %}
    {% for posts in category %}
      {% for post in posts %}
        {% if post.date %}
          {% assign year = post.date | date: "%Y" %}
          {% assign all_years = all_years | push: year %}
        {% endif %}
      {% endfor %}
    {% endfor %}
  {% endif %}
{% endfor %}

<!--Get unique years-->
{% assign all_years = all_years |Â sort | reverse %}
{% for year in all_years %}
  {% unless year == previous %}
    {% assign unique_years = unique_years | push: year %}
  {% endunless %}
  {% assign previous = year %}
{% endfor %}


<div class="row sidebar__filter-row">
  <div class="col-xs-12 sidebar__filter-section">
    <h4 class="h4 sidebar__filter-section-heading">Vuosi</h4>
    <ul class="sidebar__filter-list">
      {% for year in unique_years %}
        <li class="sidebar__filter-list-item"><input type="checkbox" id="{{ year }}" class="checkbox__input"><label for="{{ year }}" class="checkbox__label">{{ year }}</label></li>
      {% endfor %}
    </ul>
  </div>
</div>